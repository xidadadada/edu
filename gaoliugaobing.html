<html>
<body>
    <script type="text/javascript" src="../edu/day.js">
</script>
<script type="text/javascript" src="../edu/ps.js">
</script>
<div class=“rich_media_area_primary” style="margin:0px auto; width:800px;">
                
<div class="rich_media_area_primary">
                
                <h2 class="rich_media_title" title="高流量高并发">高流量高并发</h2>
                <div class="rich_media_meta_list">
                    <!-- <span class="rich_media_meta meta_original_tag dn">原创</span>
                    <a class="rich_media_meta meta_enterprise_tag" href="javascript:;"><img src="http://mmbiz.qpic.cn/mmbiz_jpg/QpRnoicU4ABbOPuPdO5LdEerNmZokInOeCtrLYMJXtp3aFSV9CJGnibujZXesEYpXsv6oljtWQeHGYHv4QUdbXaQ/0?wx_fmt=jpeg"></a> -->
                    <em class="rich_media_meta rich_media_meta_text">2018-02-24</em>
                    <em class="rich_media_meta rich_media_meta_text"></em>
                    <span class="rich_media_meta rich_media_meta_link" title="请发送到手机查看完整效果">学习交流</span>
                </div>
                
                              
                <div class="rich_media_content">
                    
                    <p>互联网时代，并发访问是在某个时间点，有多少访问同时到来。</p><p><br></p><p>QPS:每秒钟请求或者查询的数量，在互联网领域，指每秒响应请求数（指HTTP请求）；</p><p>并发数：系统同时处理的请求数量。</p><p>吞吐量：单位时间内处理的请求数量(通常由QPS与并发数决定)；</p><p>响应时间：从请求发出到收到响应花费的时间。</p><p>PV：综合浏览量（Page View）,即页面浏览量或者点击量，一个访客在 24小时内访问的页面数量。</p><p>UV：独立访客（UniQue Visitor）,即一定时间范围内相同访客多次访问网站只计算为1个独立访客。</p><p>带宽：计算宽带大小需关注峰值流量和页面的平均大小。</p><p>日网站带宽 = PV / 统计时间 （换算到秒）* 平均页面大小（单位KB）* 8</p><p>峰值每秒请求数（峰值QPS）＝（日总PV数 * 80%）/（每天秒数 * 20%）<br></p><p><br></p><p><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">5kw的pv峰值qps2300+, 如果按照一台服务器能承受 500 QPS 的动态请求.大概需要5台服务器就够了。</span></p><p><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);"><br></span></p><p><span style="color: rgb(51, 51, 51);font-family: Helvetica, Tahoma, Arial, sans-serif;font-size: 14px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">但是100Mbps&nbsp;带宽大致能提供的实际数据流量一般小于&nbsp;10MBps，<span style="color: rgb(51, 51, 51);font-family: Helvetica, Tahoma, Arial, sans-serif;font-size: 14px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">假设页面平均大小为&nbsp;100KB，&nbsp;那么就是差不多100个页面，最高到100qps。</span><br></span></p><p><span style="color: rgb(51, 51, 51);font-family: Helvetica, Tahoma, Arial, sans-serif;font-size: 14px;white-space: pre-wrap;background-color: rgb(255, 255, 255);"><br></span></p><p>压力测试：测试能承受的并发数，测试最大承受QPS值。</p><p>常用的性能测试工具：ab 、wrk、http_load、 Web Bench、Siege 、Apache JMeter</p><p>&nbsp;</p><p>ab的使用：-c 并发数 -n 请求总数</p><p>模拟 并发100 总请求5000次</p><p>例子：ab -c 100 -n 5000 xxxx</p><p>注意事项：测试机器要与被测试机器分开；不要对线上服务做压力测试；观察测试工具ab所在机器，以及被测试的前端机的CPU,内存，网络等都不超过最高限度的75%；</p><p>QPS 达到50</p><p>可以称为小型网站，一般的服务器就可以应付。</p><p>QPS 达到100</p><p>假设关系型数据库的每次请求在0.01秒完成。</p><p>假设单页面只有一个sql查询，那么100QPS意味着1秒钟之内完成100次请求，但是此时我们并不能保证数据库查询能完成100次，方案：数据库缓存层、数据库的负载均衡；</p><p>QPS达到80</p><p>假设我们使用的是百兆带宽，意味着网站出口的实际带宽是8M左右，假设每个页面只有10K，在这个并发条件下，百兆带宽已经吃完。 方案：CDN加速，负载均衡。</p><p>QPS达到1000</p><p>假设使用Memcache缓存数据库查询数据，每个页面对Memcache的请求远大于直接对DB的请求，Memcache的悲观并发数在2W左右，但有可能在之前内网带宽已经吃光，表现出不稳定，方案：静态HTML缓存；</p><p>QPS达到2000</p><p>这个级别下，文件系统访问锁都成为了灾难，方案：做业务分离，分布式存储；</p><p>流量优化：防盗链处理（拒绝恶意请求）</p><p>前端优化：1、减少HTTP请求（合并图片，css，js文件）；2、添加异步请求；3、启用浏览器缓存和文件压缩；4、CDN加速；5、建立独立的图片服务器</p><p>服务端优化：0、页面静态化处理；1、并发处理（队列，异步，多进程）；2数据库优化：数据库缓存（NOSQL）,分库分表，分区操作，读写分离，负载均衡；</p><p>WEB服务器优化：1、负载均衡，2、NGINX反向代理</p><p><br></p><p><span style="color: rgb(51, 51, 51);font-family: arial, 宋体, sans-serif;font-size: 14px;text-indent: 28px;background-color: rgb(255, 255, 255);">反向代理（Reverse Proxy）</span></p><p><span style="color: rgb(51, 51, 51);font-family: arial, 宋体, sans-serif;font-size: 14px;text-indent: 28px;background-color: rgb(255, 255, 255);">以</span>代理服务器<span style="color: rgb(51, 51, 51);font-family: arial, 宋体, sans-serif;font-size: 14px;text-indent: 28px;background-color: rgb(255, 255, 255);">来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给请求连接的客户端。</span><br></p><p><span style="color: rgb(51, 51, 51);font-family: arial, 宋体, sans-serif;font-size: 14px;text-indent: 28px;background-color: rgb(255, 255, 255);"><br></span></p><p><span style="color: rgb(51, 51, 51);font-family: arial, 宋体, sans-serif;font-size: 14px;text-indent: 28px;background-color: rgb(255, 255, 255);"></span></p><p style="box-sizing: border-box;margin-bottom: 15px;line-height: 1.75em;text-align: justify;color: rgb(85, 85, 85);font-family: 'Microsoft Yahei', tahoma, Arial, Simsun;font-size: 14px;white-space: normal;"><span style="color: rgb(0, 0, 0);">负载均衡(Load Balance)</span></p><p style="box-sizing: border-box;margin-bottom: 15px;line-height: 1.75em;text-align: justify;color: rgb(85, 85, 85);font-family: 'Microsoft Yahei', tahoma, Arial, Simsun;font-size: 14px;white-space: normal;"><span style="color: rgb(0, 0, 0);">　　技术类型：基于4层负载均衡技术和基于7层负载均衡技术</span></p><p style="box-sizing: border-box;margin-bottom: 15px;line-height: 1.75em;text-align: justify;color: rgb(85, 85, 85);font-family: 'Microsoft Yahei', tahoma, Arial, Simsun;font-size: 14px;white-space: normal;"><span style="color: rgb(0, 0, 0);">　　实现方式：硬件负载均衡设备或者软件负载均衡</span></p><p style="box-sizing: border-box;margin-bottom: 15px;line-height: 1.75em;text-align: justify;color: rgb(85, 85, 85);font-family: 'Microsoft Yahei', tahoma, Arial, Simsun;font-size: 14px;white-space: normal;"><span style="color: rgb(0, 0, 0);">　　硬件产品：F5 BIG-IP 、Citrix Netscaler 、深信服 、Array 、Radware</span></p><p style="box-sizing: border-box;margin-bottom: 15px;line-height: 1.75em;text-align: justify;color: rgb(85, 85, 85);font-family: 'Microsoft Yahei', tahoma, Arial, Simsun;font-size: 14px;white-space: normal;"><span style="color: rgb(0, 0, 0);">　　软件产品： LVS(Linux Virtual Server)、 Haproxy、Nginx、Ats(apache traffic server)</span></p><p><span style="color: rgb(0, 0, 0);"><span style="color: rgb(85, 85, 85);font-family: 'Microsoft Yahei', tahoma, Arial, Simsun;font-size: 14px;text-indent: 28px;background-color: rgb(255, 255, 255);text-align: justify;">单台LVS负载均衡器，可支持上万并发连接。</span><span style="color: rgb(85, 85, 85);font-family: 'Microsoft Yahei', tahoma, Arial, Simsun;font-size: 14px;text-align: justify;">工作在网络4层之上仅作分发之用，决定了它在负载均衡软件里的性能最强，稳定性最好，对内存和cpu资源消耗极低。<span style="color: rgb(85, 85, 85);font-family: 'Microsoft Yahei', tahoma, Arial, Simsun;font-size: 14px;text-align: justify;background-color: rgb(255, 255, 255);">只需一台服务器和就能免费部署使用。</span>不支持7层规则修改，机制过于庞大，不适合小规模应用。</span></span></p><p><span style="color: rgb(85, 85, 85);font-family: 'Microsoft Yahei', tahoma, Arial, Simsun;font-size: 14px;text-align: justify;background-color: rgb(255, 255, 255);"></span><br></p><p><span style="color: rgb(85, 85, 85);font-family: 'Microsoft Yahei', tahoma, Arial, Simsun;font-size: 14px;text-indent: 28px;background-color: rgb(255, 255, 255);text-align: justify;"></span></p><p>四层LB：服务类型为tcp/udp，只解析到4层，负载均衡设备与client三次握手之后就会和Real server建立连接；七层LB：服务类型为http/ftp/https等，解析报文到7层，在负载均衡设备与client三次握手之后，只有收到对应七层报文，才会跟RS建立连接。</p><p><br></p><p>瞬时高并发：</p><p>第一步限流：限制大部分流量，只允许少部分流量进入服务后端。</p><p>第二步削峰：比如秒杀系统瞬时会有大量用户涌入，实现削峰的常用的方法有利用缓存和消息中间件等技术。</p><p><span style="color: rgb(51, 51, 51);font-family: 'Microsoft Yahei', 微软雅黑, arial, 宋体, sans-serif;font-size: 16px;text-align: justify;background-color: rgb(255, 255, 255);">第三步异步处理：极大地提高系统并发量，其实异步处理就是削峰。</span></p><p>第四步内存缓存：瓶颈一般都是数据库读写，磁盘IO性能很低，如果能够把部分数据或业务逻辑转移到内存缓存，可极大提高系统读写速度。</p><p>最后一步可拓展：将系统设计成弹性可拓展的，如果流量来了，拓展机器就好了。消息队列可以削峰，将拦截大量并发请求，这也是一个异步处理过程，后台业务根据自己的处理能力，从消息队列中主动的拉取请求消息进行业务处理。</p><p><br></p><p>比如可以采用Redis 的key-value数据结构，用一个原子类型的变量值(AtomicInteger)作为key，把用户id作为value，库存数量便是原子变量的最大值。对于每个用户的秒杀，我们使用&nbsp;RPUSH key value插入秒杀请求， 当插入的秒杀请求数达到上限时，停止所有后续插入。然后后台启动多个工作线程，使用&nbsp;LPOP key&nbsp;读取秒杀成功者的用户id，然后再操作数据库做最终的下订单减库存操作。</p><p><br></p><p>DDoS防范</p><p><br></p><p style="margin-bottom: 0.72em;color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;">主要分为2大类：</p><p style="margin-bottom: 0.72em;color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;">1.网络层攻击 SYN Flood、ACK Flood、ICMP Flood、UDP Flood、NTP Flood 、SSDP Flood、DNS Flood等等</p><p style="margin-bottom: 0.72em;color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;">2.应用层攻击，cc攻击。http慢速攻击等等</p><p>常见攻击目标<span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">写数据库，联表查询，缓存溢出</span></p><p style="margin-bottom: 0.72em;color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;">1、登录认证<br>2、评论<br>3、用户动态<br>4、ajax api</p><p style="margin-bottom: 0.72em;color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;"><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">例子：vps服务器一般百元每月，都是 双核 cpu、512M-1G 内存、2M 带宽、硬盘越大越好。</span>一台机器会视硬盘而定挂 2-3 个站，每台服务器正常的情况下每个月能走掉 500-700G 的流量。网站采用 centos + kangle + php + 文本DB。<span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">砸带宽，国内非一线城市机房带宽价格大约为100元/M*月。</span>把服务器搞到让组织D你的人的（比如竞争对手）同一个机房。</p><p style="margin-bottom: 0.72em;color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;"><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">kangle性能来说也只有tengine和ats能一比，并发每秒都是上8000处理的，而nginx只能处理到1300并发每秒，并且kangle是完全开源的，提供商业化支持服务。</span></p><p style="margin-bottom: 0.72em;color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;"><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);"></span></p><pre style="margin-top: 1em;margin-bottom: 1em;padding: 10px;overflow: auto;font-family: Menlo, Monaco, Consolas, 'Andale Mono', 'lucida console', 'Courier New', monospace;font-size: 14px;word-wrap: normal;background-color: rgb(246, 246, 246);border-top-left-radius: 4px;border-top-right-radius: 4px;border-bottom-right-radius: 4px;border-bottom-left-radius: 4px;"><code class="language-text" style="border-top-left-radius: 3px;border-top-right-radius: 3px;border-bottom-right-radius: 3px;border-bottom-left-radius: 3px;font-family: Menlo, Monaco, Consolas, 'Andale Mono', 'lucida console', 'Courier New', monospace;"><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">利用机器重启存活那一瞬间，ssh 登录，粘贴<br><br></span>tcpdump -XvvennSs 0 tcp[20:2]=0x4745 or tcp[20:2]=0x4854<br><br></code><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;">找到 http 请求， 记下来 UA、Host、URL。</span></pre><p><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);"><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">取到 Host 主机名以后，</span>利用 DNS 转发的功能，把 被攻击的</span><span class="invisible" style="font-size: 0px;line-height: 0;font-family: a;color: transparent;text-shadow: none;">http://</span><span class="visible">xxx.com</span><span class="invisible" style="font-size: 0px;line-height: 0;font-family: a;color: transparent;text-shadow: none;"></span><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);"> 转发到 </span><span class="invisible" style="font-size: 0px;line-height: 0;font-family: a;color: transparent;text-shadow: none;">http://www.</span><span class="visible">xxx.com</span><span class="invisible" style="font-size: 0px;line-height: 0;font-family: a;color: transparent;text-shadow: none;"></span><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">，把流量都给 DNS 服务商。</span></p><p><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);"><br></span></p><p><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">在服务器上做 crontab ，用 iptables 每分钟取 IP 的 B段、 C 段 的连接数，超过一定数量就直接 DROP。一旦有新 IP 被 DROP 就会邮件我。</span></p><p><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);"><br></span></p><p><span style="color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);"></span></p><p style="margin-bottom: 0.72em;color: rgb(26, 26, 26);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;">kangle 的 web 管理面版里有一个非常实用的功能叫做：请求控制 + 回写数据。<span style="font-family: 'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;">知道 host 和 UA 以后，设置请求控制。杀掉所有 UA 的访问，同时关掉连接，回写数据。</span></p><p><span style="color: rgb(0, 0, 0);font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif;font-size: 15px;white-space: pre-wrap;background-color: rgb(255, 255, 255);">多买几个域名，比如说有10个。每个域名的接入服务器分别丢在不同的主流云系统上，并分别买一点CDN。在云之间架隧道VPN，服务器相互之间通过VPN做数据同步和心跳。留1-2个站点作为不对外提供服务的冗余节点，并做好保密措施。</span></p><p><br></p><p><br></p><p><br></p><p><br></p>
                    
                </div>
                
                
                
            </div>
          
        <script type="text/javascript" src="../edu/tongji.js">
</script>
</body>
</html>
